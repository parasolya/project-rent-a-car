{"version":3,"file":"static/js/637.1105ead4.chunk.js","mappings":"keACA,EAAuB,0BAAvB,EAA+D,iCAA/D,EAA+G,kC,kBCkH/G,EA3GoB,WAClB,OAA0CA,EAAAA,EAAAA,UAAS,IAAnD,eAAOC,EAAP,KAAsBC,EAAtB,KACA,GAA8BF,EAAAA,EAAAA,WAAS,GAAvC,eAAOG,EAAP,KAAgBC,EAAhB,KACA,GAAsCJ,EAAAA,EAAAA,UAAS,GAA/C,eAAOK,EAAP,KAAoBC,EAApB,KACA,GAAsCN,EAAAA,EAAAA,WAAS,GAA/C,eAAOO,EAAP,KAAoBC,EAApB,KACA,GAA8BR,EAAAA,EAAAA,UAAS,IAAvC,eAAOS,EAAP,KAAgBC,EAAhB,MAEAC,EAAAA,EAAAA,YAAU,WACRC,EAAUP,GACV,IAAMQ,EAAY,mCAAG,8GAEKC,EAAAA,EAAAA,MAFL,OAEXL,EAFW,OAIjBC,EAAWD,GAJM,gDAMjBM,QAAQC,MAAR,MANiB,yDAAH,qDASlBH,GACD,GAAE,CAACR,IAyBJ,IAvBA,IAAMO,EAAS,mCAAG,WAAMK,GAAN,uFAEdb,GAAW,GAFG,UAGSc,EAAAA,EAAAA,IAAUD,EAAM,GAHzB,OAIU,KADlBE,EAHQ,QAIDC,OACXZ,GAAe,GAEfN,EAAiBiB,GAEnBf,GAAW,GATG,gDAWdW,QAAQC,MAAR,MAXc,yBAadZ,GAAW,GAbG,4EAAH,sDAiBTiB,EAAkBC,EAAAA,KAAa,SAAAC,GAAI,MAAK,CAC5CC,MAAOD,EACPE,MAAOF,EAFgC,IAKnCG,EAAW,GACRC,EAAI,GAAIA,GAAK,IAAKA,GAAK,GAC9BD,EAASE,KAAKD,GAEhB,IAAME,EAAkBH,EAASI,KAAI,SAAAP,GAAI,MAAK,CAAEC,MAAOD,EAAME,MAAOF,EAA3B,IAwBzC,OACE,iBAAKQ,UAAWC,EAAhB,WACE,0BACE,SAACC,EAAA,EAAD,CACEC,SA1BkB,SAAAC,GACxB,IAAMC,EAAeD,EASfE,EARc5B,EAAQqB,KAAI,SAAAQ,GAC9B,IAAMC,EAAcC,SAASF,EAAKC,YAAYE,QAAQ,MAAO,IAAK,IAClE,OAAO,kBACFH,GADL,IAEEC,YAAAA,GAEH,IAEgCG,QAC/B,SAAAJ,GAAI,OACFA,EAAKf,OAASa,EAAab,MAC3Be,EAAKC,aAAeH,EAAaG,aACjCD,EAAKK,SAAWH,SAASJ,EAAaQ,KAAM,KAC5CN,EAAKK,SAAWH,SAASJ,EAAaS,GAAI,GAJxC,IAMN3C,EAAiBmC,EAClB,EASOhB,gBAAiBA,EACjBQ,gBAAiBA,MAGpB1B,EACC,cAEA,SAAC2C,EAAA,EAAD,CACEC,MAAO9C,EACP+C,sBAhBe,SAAAC,GAAQ,KAmB3B,0BACE,oBACEC,QAAS,WACH3C,GAEFD,EADiBD,EAAc,EAGlC,EACD8C,MAAO,CAAEC,QAAS7C,EAAc,QAAU,QAC1CwB,UAAWC,EARb,UAUG,KACD,cAAGD,UAAWC,EAAd,8BAKT,C","sources":["webpack://project-rent-a-car/./src/pages/CatalogPage/CatalogPage.module.css?b0a0","pages/CatalogPage/CatalogPage.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"page\":\"CatalogPage_page__lbpZ6\",\"btnLoadMore\":\"CatalogPage_btnLoadMore__NyFFA\",\"textLoadMore\":\"CatalogPage_textLoadMore__o8h0L\"};","import { useState, useEffect } from 'react';\nimport ListCards from '../../components/ListCards/ListCards';\nimport carBrand from '../../dataFile/makes.json';\nimport { fetchCars, fetchDataAll } from '../../loadAPI.js';\nimport css from './CatalogPage.module.css';\n\nimport CatalogForm from '../../components/Form/CatalogForm/CatalogForm';\n\nconst CatalogPage = () => {\n  const [filteredArray, setFilteredArray] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [hasNextPage, setHasNextPage] = useState(true);\n  const [allCars, setAllCars] = useState([]);\n\n  useEffect(() => {\n    fetchData(currentPage);\n    const fetchAllData = async () => {\n      try {\n        const allCars = await fetchDataAll(); \n        \n        setAllCars(allCars)\n      } catch (error) {\n        console.error(error);\n      } \n    };\n    fetchAllData();\n  }, [currentPage]);\n\n  const fetchData = async page => {\n    try {\n      setLoading(true);\n      const response = await fetchCars(page, 8); \n      if (response.length === 0) {\n        setHasNextPage(false);\n      } else {\n        setFilteredArray(response);\n      }\n      setLoading(false);\n    } catch (error) {\n      console.error(error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const optionsCarBrand = carBrand.map(make => ({\n    label: make,\n    value: make,\n  }));\n\n  const carPrice = [];\n  for (let i = 10; i <= 600; i += 10) {\n    carPrice.push(i);\n  }\n  const optionsCarPrice = carPrice.map(make => ({ label: make, value: make }));\n\n  const formSubmitCatalog = data => {\n    const filterObject = data;\n    const newCarArray = allCars.map(item => {\n      const rentalPrice = parseInt(item.rentalPrice.replace(/\\D/g, ''), 10);\n      return {\n        ...item,\n        rentalPrice,\n      };\n    });\n\n    const filteredCars = newCarArray.filter(\n      item =>\n        item.make === filterObject.make &&\n        item.rentalPrice <= filterObject.rentalPrice &&\n        item.mileage >= parseInt(filterObject.from, 10) &&\n        item.mileage <= parseInt(filterObject.to, 10)\n    );\n    setFilteredArray(filteredCars);\n  };\n\n  const changeFavorite = id => {};\n\n  return (\n    <div className={css.page}>\n      <div>\n        <CatalogForm\n          onSubmit={formSubmitCatalog}\n          optionsCarBrand={optionsCarBrand}\n          optionsCarPrice={optionsCarPrice}\n        />\n      </div>\n      {loading ? (\n        'Loading...'\n      ) : (\n        <ListCards\n          items={filteredArray}\n          onChangeFavoriteArrey={changeFavorite}\n        />\n      )}\n      <div>\n        <button\n          onClick={() => {\n            if (hasNextPage) {\n              const nextPage = currentPage + 1;\n              setCurrentPage(nextPage);\n            }\n          }}\n          style={{ display: hasNextPage ? 'block' : 'none' }}\n          className={css.btnLoadMore}\n        >\n          {' '}\n          <p className={css.textLoadMore}>Load more</p>\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default CatalogPage;\n"],"names":["useState","filteredArray","setFilteredArray","loading","setLoading","currentPage","setCurrentPage","hasNextPage","setHasNextPage","allCars","setAllCars","useEffect","fetchData","fetchAllData","fetchDataAll","console","error","page","fetchCars","response","length","optionsCarBrand","carBrand","make","label","value","carPrice","i","push","optionsCarPrice","map","className","css","CatalogForm","onSubmit","data","filterObject","filteredCars","item","rentalPrice","parseInt","replace","filter","mileage","from","to","ListCards","items","onChangeFavoriteArrey","id","onClick","style","display"],"sourceRoot":""}